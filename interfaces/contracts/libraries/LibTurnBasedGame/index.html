<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://rankify.it/interfaces/contracts/libraries/LibTurnBasedGame/" />
      <link rel="shortcut icon" href="../../../../img/favicon.ico" />
    <title>Solidity API - Rankify Documentation</title>
    <link rel="stylesheet" href="../../../../css/theme.css" />
    <link rel="stylesheet" href="../../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Solidity API";
        var mkdocs_page_input_path = "interfaces/contracts/libraries/LibTurnBasedGame.md";
        var mkdocs_page_url = "/interfaces/contracts/libraries/LibTurnBasedGame/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/solidity.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../../.." class="icon icon-home"> Rankify Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Welcome</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../..">Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../governance/">Governance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../tokens/">Token types</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../architecture/">Smart contract infrastructure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../architecture/applications/">Applications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../architecture/specifications/">Specifications</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">interfaces</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../*">None</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../js/">JavaScript SDK</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Support</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../support/">Community channels</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../../support/faq/">Frequently asked questions</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../..">Rankify Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../.." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Solidity API</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/rankify-it/edit/master/docs/interfaces/contracts/libraries/LibTurnBasedGame.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="solidity-api">Solidity API<a class="headerlink" href="#solidity-api" title="Permanent link">#</a></h1>
<h2 id="libtbg">LibTBG<a class="headerlink" href="#libtbg" title="Permanent link">#</a></h2>
<p>_Library for managing turn-based games.
It is designed to be used as a base library for games, and provides the following functionality:
- setting game settings such as time per turn, max players, min players, etc as well as perform score and leaderboard tracking</p>
<p>Limitations:
- It is assumed there is only one game per player
- It is assumed there is only on game master per game</p>
<p><strong><em>WARNING</em></strong> Some limitations:
- This library is still under development and its interfaces may change.
- getting game data (which has own storage assigement and can be encapsulated from library) however there is no storage slot collision checks in place_</p>
<h3 id="gamesettings">GameSettings<a class="headerlink" href="#gamesettings" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">struct GameSettings {
  uint256 timePerTurn;
  uint256 maxPlayersSize;
  uint256 minPlayersSize;
  uint256 timeToJoin;
  uint256 maxTurns;
  uint256 numWinners;
  uint256 voteCredits;
  string subject;
}</code></pre>
<h3 id="gameinstance">GameInstance<a class="headerlink" href="#gameinstance" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">struct GameInstance {
  address gameMaster;
  uint256 currentTurn;
  uint256 turnStartedAt;
  uint256 registrationOpenAt;
  bool hasStarted;
  bool hasEnded;
  struct EnumerableSet.AddressSet players;
  mapping(address =&gt; bool) madeMove;
  uint256 numPlayersMadeMove;
  mapping(address =&gt; uint256) score;
  bytes32 implemenationStoragePointer;
  bool isOvertime;
  address[] leaderboard;
}</code></pre>
<h3 id="tbgstoragestruct">TBGStorageStruct<a class="headerlink" href="#tbgstoragestruct" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">struct TBGStorageStruct {
  struct LibTBG.GameSettings settings;
  mapping(uint256 =&gt; struct LibTBG.GameInstance) games;
  mapping(address =&gt; uint256) playerInGame;
  uint256 totalGamesCreated;
}</code></pre>
<h3 id="tbg_storage_position">TBG_STORAGE_POSITION<a class="headerlink" href="#tbg_storage_position" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">bytes32 TBG_STORAGE_POSITION</code></pre>
<h3 id="implementation_storage_position">IMPLEMENTATION_STORAGE_POSITION<a class="headerlink" href="#implementation_storage_position" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">bytes32 IMPLEMENTATION_STORAGE_POSITION</code></pre>
<h3 id="tbgstorage">TBGStorage<a class="headerlink" href="#tbgstorage" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function TBGStorage() internal pure returns (struct LibTBG.TBGStorageStruct es)</code></pre>
<h3 id="_getgame">_getGame<a class="headerlink" href="#_getgame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _getGame(uint256 gameId) internal view returns (struct LibTBG.GameInstance)</code></pre>
<h3 id="init">init<a class="headerlink" href="#init" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function init(struct LibTBG.GameSettings settings) internal</code></pre>
<p>_Initializes the game with the provided settings. <code>settings</code> is the settings for the game.</p>
<p>Requirements:</p>
<ul>
<li><code>settings.timePerTurn</code> must not be zero.</li>
<li><code>settings.maxPlayersSize</code> must not be zero.</li>
<li><code>settings.minPlayersSize</code> must be at least 2.</li>
<li><code>settings.maxTurns</code> must not be zero.</li>
<li><code>settings.numWinners</code> must not be zero and must be less than <code>settings.minPlayersSize</code>.</li>
<li><code>settings.timeToJoin</code> must not be zero.</li>
<li><code>settings.maxPlayersSize</code> must not be less than <code>settings.minPlayersSize</code>.</li>
<li><code>settings.subject</code> must not be an empty string.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the settings of the game to <code>settings</code>._</li>
</ul>
<h3 id="creategame">createGame<a class="headerlink" href="#creategame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function createGame(uint256 gameId, address gm) internal</code></pre>
<p>_Creates a new game with the provided game ID and game master. <code>gameId</code> is the ID of the game. <code>gm</code> is the address of the game master.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must not already exist.</li>
<li><code>gm</code> must not be the zero address.</li>
<li><code>gameId</code> must not be zero.</li>
<li>The game master of the game with <code>gameId</code> must be the zero address.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the game master of the game with <code>gameId</code> to <code>gm</code>.</li>
<li>Increments the total number of games created._</li>
</ul>
<h3 id="deletegame">deleteGame<a class="headerlink" href="#deletegame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function deleteGame(uint256 gameId) internal</code></pre>
<p>_Deletes a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must exist.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the game master, current turn, hasEnded, hasStarted,
  implementationStoragePointer, isOvertime, leaderboard, numPlayersMadeMove,
  players, registrationOpenAt, and turnStartedAt of the game with <code>gameId</code>
  to their initial values.</li>
<li>Sets the score and madeMove of each player in the game with <code>gameId</code>
  to their initial values._</li>
</ul>
<h3 id="canbejoined">canBeJoined<a class="headerlink" href="#canbejoined" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function canBeJoined(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID can be joined. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game can be joined._</li>
</ul>
<h3 id="addplayer">addPlayer<a class="headerlink" href="#addplayer" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function addPlayer(uint256 gameId, address participant) internal</code></pre>
<p>_Adds a player to a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>participant</code> is the address of the player.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must exist.</li>
<li><code>participant</code> must not already be in a game.</li>
<li>The number of players in the game with <code>gameId</code> must be less than the maximum number of players.</li>
<li>The game with <code>gameId</code> must be joinable.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Adds <code>participant</code> to the players of the game with <code>gameId</code>.</li>
<li>Sets the madeMove of <code>participant</code> in the game with <code>gameId</code> to false.</li>
<li>Sets the game of <code>participant</code> to <code>gameId</code>._</li>
</ul>
<h3 id="isplayeringame">isPlayerInGame<a class="headerlink" href="#isplayeringame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isPlayerInGame(uint256 gameId, address player) internal view returns (bool)</code></pre>
<p>_Checks if a player is in a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>player</code> is the address of the player.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the player is in the game._</li>
</ul>
<h3 id="removeplayer">removePlayer<a class="headerlink" href="#removeplayer" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function removePlayer(uint256 gameId, address participant) internal</code></pre>
<p>_Removes a player from a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>participant</code> is the address of the player.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must exist.</li>
<li><code>participant</code> must be in the game with <code>gameId</code>.</li>
<li>The game with <code>gameId</code> must not have started or must have ended.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the game of <code>participant</code> to 0.</li>
<li>Removes <code>participant</code> from the players of the game with <code>gameId</code>._</li>
</ul>
<h3 id="isturntimedout">isTurnTimedOut<a class="headerlink" href="#isturntimedout" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isTurnTimedOut(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if the current turn in a game with the provided game ID has timed out. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li><code>gameId</code> must not be zero.</li>
<li>The game with <code>gameId</code> must have started.</li>
</ul>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the current turn has timed out._</li>
</ul>
<h3 id="gameexists">gameExists<a class="headerlink" href="#gameexists" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function gameExists(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID exists. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game exists._</li>
</ul>
<h3 id="enforcehasstarted">enforceHasStarted<a class="headerlink" href="#enforcehasstarted" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function enforceHasStarted(uint256 gameId) internal view</code></pre>
<p>_Enforces that a game with the provided game ID has started. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li><code>gameId</code> must not be zero.</li>
<li>The game with <code>gameId</code> must have started._</li>
</ul>
<h3 id="canendturn">canEndTurn<a class="headerlink" href="#canendturn" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function canEndTurn(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Enforces that a game with the provided game ID has started. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li><code>gameId</code> must not be zero.</li>
<li>The game with <code>gameId</code> must have started._</li>
</ul>
<h3 id="canendturnearly">canEndTurnEarly<a class="headerlink" href="#canendturnearly" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function canEndTurnEarly(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if the current turn in a game with the provided game ID can end early. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the current turn can end early._</li>
</ul>
<h3 id="onlyinturntime">onlyInTurnTime<a class="headerlink" href="#onlyinturntime" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">modifier onlyInTurnTime(uint256 gameId)</code></pre>
<p>_Modifier that requires the current turn in a game with the provided game ID to be able to end. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>The current turn in the game with <code>gameId</code> must be able to end._</li>
</ul>
<h3 id="onlywhenturncanend">onlyWhenTurnCanEnd<a class="headerlink" href="#onlywhenturncanend" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">modifier onlyWhenTurnCanEnd(uint256 gameId)</code></pre>
<h3 id="_clearcurrentmoves">_clearCurrentMoves<a class="headerlink" href="#_clearcurrentmoves" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _clearCurrentMoves(struct LibTBG.GameInstance game) internal</code></pre>
<p>_Clears the current moves in a game. <code>game</code> is the game.</p>
<p>Modifies:</p>
<ul>
<li>Sets the madeMove of each player in <code>game</code> to false._</li>
</ul>
<h3 id="_resetplayerstates">_resetPlayerStates<a class="headerlink" href="#_resetplayerstates" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _resetPlayerStates(struct LibTBG.GameInstance game) internal</code></pre>
<p>_Resets the states of the players in a game. <code>game</code> is the game.</p>
<p>Modifies:</p>
<ul>
<li>Sets the madeMove and score of each player in <code>game</code> to their initial values._</li>
</ul>
<h3 id="setscore">setScore<a class="headerlink" href="#setscore" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function setScore(uint256 gameId, address player, uint256 value) internal</code></pre>
<p>_Sets the score of a player in a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>player</code> is the address of the player. <code>value</code> is the score.</p>
<p>Requirements:</p>
<ul>
<li><code>player</code> must be in the game with <code>gameId</code>.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the score of <code>player</code> in the game with <code>gameId</code> to <code>value</code>._</li>
</ul>
<h3 id="getscore">getScore<a class="headerlink" href="#getscore" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getScore(uint256 gameId, address player) internal view returns (uint256)</code></pre>
<p>_Gets the score of a player in a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>player</code> is the address of the player.</p>
<p>Returns:</p>
<ul>
<li>The score of <code>player</code> in the game with <code>gameId</code>._</li>
</ul>
<h3 id="getscores">getScores<a class="headerlink" href="#getscores" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getScores(uint256 gameId) internal view returns (address[], uint256[])</code></pre>
<p>_Gets the scores of the players in a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>An array of the addresses of the players in the game with <code>gameId</code>.</li>
<li>An array of the scores of the players in the game with <code>gameId</code>._</li>
</ul>
<h3 id="openregistration">openRegistration<a class="headerlink" href="#openregistration" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function openRegistration(uint256 gameId) internal</code></pre>
<p>_Opens registration for a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must exist.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the registrationOpenAt of the game with <code>gameId</code> to the current block timestamp._</li>
</ul>
<h3 id="isregistrationopen">isRegistrationOpen<a class="headerlink" href="#isregistrationopen" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isRegistrationOpen(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if registration is open for a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether registration is open for the game._</li>
</ul>
<h3 id="canstart">canStart<a class="headerlink" href="#canstart" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function canStart(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID can start. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game can start._</li>
</ul>
<h3 id="canstartearly">canStartEarly<a class="headerlink" href="#canstartearly" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function canStartEarly(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID can start early. <code>gameId</code> is the ID of the game.
By "early" it is assumed that time to join has not yet passed, but it's already cap players limit reached.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game can start early._</li>
</ul>
<h3 id="startgameearly">startGameEarly<a class="headerlink" href="#startgameearly" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function startGameEarly(uint256 gameId) internal</code></pre>
<p>_Starts a game with the provided game ID early. <code>gameId</code> is the ID of the game.
By "early" it is assumed that time to join has not yet passed, but it's already cap players limit reached.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must exist.</li>
<li>The game with <code>gameId</code> must not have started.</li>
<li>The game with <code>gameId</code> must have opened registration.</li>
<li>The number of players in the game with <code>gameId</code> must be greater than or equal to the minimum number of players.</li>
<li>The number of players in the game with <code>gameId</code> must be equal to the maximum number of players or the current block timestamp must be greater than the registration open time plus the time to join.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the hasStarted, hasEnded, currentTurn, and turnStartedAt of the game with <code>gameId</code> to their new values.</li>
<li>Resets the states of the players in the game with <code>gameId</code>._</li>
</ul>
<h3 id="startgame">startGame<a class="headerlink" href="#startgame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function startGame(uint256 gameId) internal</code></pre>
<p>_Starts a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must exist.</li>
<li>The game with <code>gameId</code> must not have started.</li>
<li>The game with <code>gameId</code> must have opened registration.</li>
<li>The current block timestamp must be greater than the registration open time plus the time to join.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the hasStarted, hasEnded, currentTurn, and turnStartedAt of the game with <code>gameId</code> to their new values.</li>
<li>Resets the states of the players in the game with <code>gameId</code>._</li>
</ul>
<h3 id="getturn">getTurn<a class="headerlink" href="#getturn" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getTurn(uint256 gameId) internal view returns (uint256)</code></pre>
<p>_Gets the current turn of a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>The current turn of the game with <code>gameId</code>._</li>
</ul>
<h3 id="getgm">getGM<a class="headerlink" href="#getgm" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getGM(uint256 gameId) internal view returns (address)</code></pre>
<p>_Gets the game master of a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>The game master of the game with <code>gameId</code>._</li>
</ul>
<h3 id="islastturn">isLastTurn<a class="headerlink" href="#islastturn" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isLastTurn(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if the current turn is the last turn in a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the current turn is the last turn in the game._</li>
</ul>
<h3 id="isgameover">isGameOver<a class="headerlink" href="#isgameover" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isGameOver(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID is over. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game is over._</li>
</ul>
<h3 id="enforceisnotover">enforceIsNotOver<a class="headerlink" href="#enforceisnotover" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function enforceIsNotOver(uint256 gameId) internal view</code></pre>
<p>_Enforces that a game with the provided game ID is not over. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must not be over._</li>
</ul>
<h3 id="playermove">playerMove<a class="headerlink" href="#playermove" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function playerMove(uint256 gameId, address player) internal</code></pre>
<p>_Records a player's move in a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>player</code> is the address of the player.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must have started.</li>
<li>The game with <code>gameId</code> must not be over.</li>
<li><code>player</code> must not have made a move in the current turn of the game with <code>gameId</code>.</li>
<li><code>player</code> must be in the game with <code>gameId</code>.</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Sets the madeMove of <code>player</code> in the game with <code>gameId</code> to true.</li>
<li>Increments the numPlayersMadeMove of the game with <code>gameId</code>._</li>
</ul>
<h3 id="isplayerturncomplete">isPlayerTurnComplete<a class="headerlink" href="#isplayerturncomplete" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isPlayerTurnComplete(uint256 gameId, address player) internal view returns (bool)</code></pre>
<h3 id="enforceisplayinggame">enforceIsPlayingGame<a class="headerlink" href="#enforceisplayinggame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function enforceIsPlayingGame(uint256 gameId, address player) internal view</code></pre>
<p>_Enforces that a player is in a game with the provided game ID. <code>gameId</code> is the ID of the game. <code>player</code> is the address of the player.</p>
<p>Requirements:</p>
<ul>
<li><code>player</code> must be in the game with <code>gameId</code>._</li>
</ul>
<h3 id="hasstarted">hasStarted<a class="headerlink" href="#hasstarted" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function hasStarted(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID has started. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game has started._</li>
</ul>
<h3 id="getleaderboard">getLeaderBoard<a class="headerlink" href="#getleaderboard" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getLeaderBoard(uint256 gameId) internal view returns (address[])</code></pre>
<p>_Gets the leaderboard of a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>An array of the addresses of the players in the game with <code>gameId</code>, sorted by score._</li>
</ul>
<h3 id="nextturn">nextTurn<a class="headerlink" href="#nextturn" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function nextTurn(uint256 gameId) internal returns (bool, bool, bool)</code></pre>
<p>_Advances to the next turn in a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>The game with <code>gameId</code> must be able to end the current turn early. (all players have moved or the turn has timed out)</li>
</ul>
<p>Modifies:</p>
<ul>
<li>Clears the current moves in the game with <code>gameId</code>.</li>
<li>Increments the currentTurn of the game with <code>gameId</code>.</li>
<li>Sets the turnStartedAt of the game with <code>gameId</code> to the current block timestamp.</li>
<li>If the current turn is the last turn or the game with <code>gameId</code> is in overtime, checks if the game is a tie and sets the isOvertime of the game with <code>gameId</code> to the result.</li>
<li>Sets the hasEnded of the game with <code>gameId</code> to whether the game is over.</li>
</ul>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the current turn is the last turn.</li>
<li>A boolean indicating whether the game is a tie.</li>
<li>A boolean indicating whether the game is over._</li>
</ul>
<h3 id="getdatastorage">getDataStorage<a class="headerlink" href="#getdatastorage" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getDataStorage() internal pure returns (bytes32 pointer)</code></pre>
<p>_Gets the data storage pointer.</p>
<p>Returns:</p>
<ul>
<li>The data storage pointer._</li>
</ul>
<h3 id="getgamedatastorage">getGameDataStorage<a class="headerlink" href="#getgamedatastorage" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getGameDataStorage(uint256 gameId) internal view returns (bytes32 pointer)</code></pre>
<p>_Gets the game data storage pointer of a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>The game data storage pointer of the game with <code>gameId</code>._</li>
</ul>
<h3 id="getplayersnumber">getPlayersNumber<a class="headerlink" href="#getplayersnumber" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getPlayersNumber(uint256 gameId) internal view returns (uint256)</code></pre>
<p>_Gets the number of players in a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>The number of players in the game with <code>gameId</code>._</li>
</ul>
<h3 id="getplayers">getPlayers<a class="headerlink" href="#getplayers" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getPlayers(uint256 gameId) internal view returns (address[])</code></pre>
<p>_Gets the players in a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>An array of the addresses of the players in the game with <code>gameId</code>._</li>
</ul>
<h3 id="getgamesettings">getGameSettings<a class="headerlink" href="#getgamesettings" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getGameSettings() internal view returns (struct LibTBG.GameSettings)</code></pre>
<p>_Gets the game settings.</p>
<p>Returns:</p>
<ul>
<li>The game settings._</li>
</ul>
<h3 id="enforceispreregistrationstage">enforceIsPreRegistrationStage<a class="headerlink" href="#enforceispreregistrationstage" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function enforceIsPreRegistrationStage(uint256 gameId) internal view</code></pre>
<p>_Enforces that a game with the provided game ID is in the pre-registration stage. <code>gameId</code> is the ID of the game.</p>
<p>Requirements:</p>
<ul>
<li>Registration must not be open for the game with <code>gameId</code>.</li>
<li>The game with <code>gameId</code> must not have started._</li>
</ul>
<h3 id="addovertime">addOvertime<a class="headerlink" href="#addovertime" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function addOvertime(uint256 gameId) internal</code></pre>
<p>_Adds overtime to a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Modifies:</p>
<ul>
<li>Sets the isOvertime of the game with <code>gameId</code> to true._</li>
</ul>
<h3 id="isovertime">isOvertime<a class="headerlink" href="#isovertime" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isOvertime(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID is in overtime. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game is in overtime._</li>
</ul>
<h3 id="resetovertime">resetOvertime<a class="headerlink" href="#resetovertime" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function resetOvertime(uint256 gameId) internal</code></pre>
<p>_Resets the overtime of a game with the provided game ID. <code>gameId</code> is the ID of the game.</p>
<p>Modifies:</p>
<ul>
<li>Sets the isOvertime of the game with <code>gameId</code> to false._</li>
</ul>
<h3 id="istie">isTie<a class="headerlink" href="#istie" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function isTie(uint256 gameId) internal view returns (bool)</code></pre>
<p>_Checks if a game with the provided game ID is a tie. <code>gameId</code> is the ID of the game.
Tie being defined as at least two of the top <code>numWinners</code> players having the same score.</p>
<p>Returns:</p>
<ul>
<li>A boolean indicating whether the game is a tie._</li>
</ul>
<h3 id="getplayersgame">getPlayersGame<a class="headerlink" href="#getplayersgame" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function getPlayersGame(address player) internal view returns (uint256)</code></pre>
<p>_Gets the game ID of the game a player is in. <code>player</code> is the address of the player.</p>
<p>Returns:</p>
<ul>
<li>The game ID of the game <code>player</code> is in._</li>
</ul>
<h3 id="sortbyscore">sortByScore<a class="headerlink" href="#sortbyscore" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function sortByScore(uint256 gameId) internal view returns (address[], uint256[])</code></pre>
<p>_Sorts the players in a game with the provided game ID by score in descending order. <code>gameId</code> is the ID of the game.</p>
<p>Returns:</p>
<ul>
<li>An array of the addresses of the players in the game with <code>gameId</code>, sorted by score.</li>
<li>An array of the scores of the players in the game with <code>gameId</code>, sorted in descending order._</li>
</ul>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rankify-it" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
    
  </span>
</div>
    <script src="../../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../../..";</script>
    <script src="../../../../js/theme_extra.js"></script>
    <script src="../../../../js/theme.js"></script>
      <script src="../../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
