<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://rankify.it/contracts/libraries/LibMultipass/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>LibMultipass - Rankify Documentation</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "LibMultipass";
        var mkdocs_page_input_path = "contracts/libraries/LibMultipass.md";
        var mkdocs_page_url = "/contracts/libraries/LibMultipass/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/solidity.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/bash.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> Rankify Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Welcome</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../..">Getting started</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../governance/">Governance</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../tokens/">Token types</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/">Smart contract infrastructure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/applications/">Applications</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../architecture/specifications/">Specifications [DRAFT]</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">interfaces</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" >Contracts</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" >Abstracts</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../abstracts/CompositeERC1155/">CompositeERC1155</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../abstracts/DiamondReentrancyGuard/">DiamondReentrancyGuard</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../abstracts/IVInstallerPlugin/">IVInstallerPlugin</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../abstracts/LockableERC1155/">LockableERC1155</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../abstracts/draft-EIP712Diamond/">draft EIP712Diamond</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Facets</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../facets/DNSFacet/">DNSFacet</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../facets/EIP712InspectorFacet/">EIP712InspectorFacet</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../facets/RankifyInstanceGameMastersFacet/">RankifyInstanceGameMastersFacet</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../facets/RankifyInstanceGameOwnersFacet/">RankifyInstanceGameOwnersFacet</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../facets/RankifyInstanceMainFacet/">RankifyInstanceMainFacet</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../facets/RankifyInstanceRequirementsFacet/">RankifyInstanceRequirementsFacet</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Interfaces</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IERC1155Receiver/">ERC1155 transfer receiver interface</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/ILockableERC1155/">ILockableERC1155</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IManagedAssetFactory/">IManagedAssetFactory</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IMultipass/">IMultipass</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IRankToken/">IRankToken</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IRankifyInstanceCommons/">IRankifyInstanceCommons</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IRepository/">IRepository</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IVInstaller/">IVInstaller</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IVRegistry/">IVRegistry</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IVRepoFactory/">IVRepoFactory</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../interfaces/IVTag/">IVTag</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" >Libraries</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../LibArray/">LibArray</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../LibCoinVending/">LibCoinVending</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../LibEIP712Storage/">LibEIP712Storage</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="#">LibMultipass</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#description">Description</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#implementation">Implementation</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../LibQuadraticVoting/">LibQuadraticVoting</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../LibRankify/">LibRankify</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../LibReentrancyGuard/">LibReentrancyGuard</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../LibTurnBasedGame/">LibTBG</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" >Tokens</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../../tokens/RankToken/">RankToken</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../../tokens/Rankify/">Rankify</a>
                </li>
    </ul>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../interfaces/js/">JavaScript SDK</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Support</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../../support/">Community channels</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../../support/faq/">Frequently asked questions</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">Rankify Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">interfaces</li>
          <li class="breadcrumb-item">Contracts</li>
          <li class="breadcrumb-item">Libraries</li>
      <li class="breadcrumb-item active">LibMultipass</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/rankify-it/edit/master/docs/contracts/libraries/LibMultipass.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="_1"><a class="headerlink" href="#_1" title="Permanent link">#</a></h1>
<h2 id="description">Description<a class="headerlink" href="#description" title="Permanent link">#</a></h2>
<h2 id="implementation">Implementation<a class="headerlink" href="#implementation" title="Permanent link">#</a></h2>
<h3 id="public-struct-namequery">public struct NameQuery<a class="headerlink" href="#public-struct-namequery" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Input</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><em>resolves user from any given argument
Requirements:
 domainName must be given and must be initialized
 id OR username OR address must be given
This method first tries to resolve by address, then by user id and finally by username</em></p>
<pre class="highlight"><code class="language-solidity">struct NameQuery {
  bytes32 domainName;
  address wallet;
  bytes32 name;
  bytes32 id;
  bytes32 targetDomain;
}</code></pre>
<h3 id="public-struct-domain">public struct Domain<a class="headerlink" href="#public-struct-domain" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Input</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><em>The domain name of the registrar.</em></p>
<pre class="highlight"><code class="language-solidity">struct Domain {
  bytes32 name;
  uint256 fee;
  uint256 freeRegistrationsNumber;
  uint256 referrerReward;
  uint256 referralDiscount;
  bool isActive;
  address registrar;
  uint24 ttl;
  uint256 registerSize;
}</code></pre>
<h3 id="public-struct-record">public struct Record<a class="headerlink" href="#public-struct-record" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">struct Record {
  address wallet;
  bytes32 name;
  bytes32 id;
  uint96 nonce;
  bytes32 domainName;
}</code></pre>
<h3 id="internal-variable-multipass_storage_position">internal variable MULTIPASS_STORAGE_POSITION<a class="headerlink" href="#internal-variable-multipass_storage_position" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">bytes32 MULTIPASS_STORAGE_POSITION </code></pre>
<h3 id="public-struct-domainnameservice">public struct DomainNameService<a class="headerlink" href="#public-struct-domainnameservice" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th style="text-align: left;">Input</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><em>The domain name of the registrar.</em></p>
<pre class="highlight"><code class="language-solidity">struct DomainNameService {
  struct LibMultipass.Domain properties;
  mapping(bytes32 =&gt; address) idToAddress;
  mapping(bytes32 =&gt; uint96) nonce;
  mapping(address =&gt; bytes32) addressToId;
  mapping(bytes32 =&gt; bytes32) nameToId;
  mapping(bytes32 =&gt; bytes32) idToName;
}</code></pre>
<h3 id="public-struct-multipassstoragestruct">public struct MultipassStorageStruct<a class="headerlink" href="#public-struct-multipassstoragestruct" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">struct MultipassStorageStruct {
  mapping(uint256 =&gt; struct LibMultipass.DomainNameService) domains;
  mapping(bytes32 =&gt; uint256) domainNameToIndex;
  uint256 numDomains;
}</code></pre>
<h3 id="internal-function-multipassstorage">internal function MultipassStorage<a class="headerlink" href="#internal-function-multipassstorage" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function MultipassStorage() internal pure returns (struct LibMultipass.MultipassStorageStruct es) </code></pre>
<h3 id="internal-variable-_typehash">internal variable _TYPEHASH<a class="headerlink" href="#internal-variable-_typehash" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">bytes32 _TYPEHASH </code></pre>
<h3 id="internal-variable-_typehash_referral">internal variable _TYPEHASH_REFERRAL<a class="headerlink" href="#internal-variable-_typehash_referral" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">bytes32 _TYPEHASH_REFERRAL </code></pre>
<h3 id="internal-function-_checkstringfits32b">internal function _checkStringFits32b<a class="headerlink" href="#internal-function-_checkstringfits32b" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _checkStringFits32b(string value) internal pure returns (bool) </code></pre>
<h3 id="internal-function-_checknotempty">internal function _checkNotEmpty<a class="headerlink" href="#internal-function-_checknotempty" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _checkNotEmpty(bytes32 value) internal pure returns (bool) </code></pre>
<h3 id="internal-function-resolvedomainindex">internal function resolveDomainIndex<a class="headerlink" href="#internal-function-resolvedomainindex" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function resolveDomainIndex(bytes32 domainName) internal view returns (uint256) </code></pre>
<h3 id="internal-function-_getdomainstorage">internal function _getDomainStorage<a class="headerlink" href="#internal-function-_getdomainstorage" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _getDomainStorage(bytes32 domainName) internal view returns (struct LibMultipass.DomainNameService) </code></pre>
<h3 id="internal-function-_initializedomain">internal function _initializeDomain<a class="headerlink" href="#internal-function-_initializedomain" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _initializeDomain(address registrar, uint256 freeRegistrationsNumber, uint256 fee, bytes32 domainName, uint256 referrerReward, uint256 referralDiscount) internal </code></pre>
<h3 id="internal-function-_getmodifyprice">internal function _getModifyPrice<a class="headerlink" href="#internal-function-_getmodifyprice" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _getModifyPrice(struct LibMultipass.Record userRecord) internal view returns (uint256) </code></pre>
<h3 id="internal-function-resolverecord">internal function resolveRecord<a class="headerlink" href="#internal-function-resolverecord" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function resolveRecord(struct LibMultipass.NameQuery query) internal view returns (bool, struct LibMultipass.Record) </code></pre>
<p><em>resolves Record of name query in to status and identity</em></p>
<h3 id="internal-function-_setrecord">internal function _setRecord<a class="headerlink" href="#internal-function-_setrecord" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _setRecord(struct LibMultipass.DomainNameService domain, struct LibMultipass.Record record) internal </code></pre>
<p><em>this function bears no security checks, it will ignore nonce in arg and will increment
  nonce value stored in domain instread</em></p>
<h3 id="internal-function-queryfromrecord">internal function queryFromRecord<a class="headerlink" href="#internal-function-queryfromrecord" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function queryFromRecord(struct LibMultipass.Record _record, bytes32 _domainName) internal pure returns (struct LibMultipass.NameQuery) </code></pre>
<h3 id="internal-function-shouldregisterforfree">internal function shouldRegisterForFree<a class="headerlink" href="#internal-function-shouldregisterforfree" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function shouldRegisterForFree(struct LibMultipass.DomainNameService domain) internal view returns (bool) </code></pre>
<h3 id="internal-function-_registernew">internal function _registerNew<a class="headerlink" href="#internal-function-_registernew" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _registerNew(struct LibMultipass.Record newRecord, struct LibMultipass.DomainNameService domain) internal </code></pre>
<h3 id="internal-function-_getcontractstate">internal function _getContractState<a class="headerlink" href="#internal-function-_getcontractstate" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _getContractState() internal view returns (uint256) </code></pre>
<h3 id="internal-function-_getdomainstoragebyidx">internal function _getDomainStorageByIdx<a class="headerlink" href="#internal-function-_getdomainstoragebyidx" title="Permanent link">#</a></h3>
<pre class="highlight"><code class="language-solidity">function _getDomainStorageByIdx(uint256 index) internal view returns (struct LibMultipass.DomainNameService) </code></pre>
<!--CONTRACT_END-->
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../LibEIP712Storage/" class="btn btn-neutral float-left" title="LibEIP712Storage"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../LibQuadraticVoting/" class="btn btn-neutral float-right" title="LibQuadraticVoting">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/rankify-it" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../LibEIP712Storage/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../LibQuadraticVoting/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../../..";</script>
    <script src="../../../js/theme_extra.js"></script>
    <script src="../../../js/theme.js"></script>
      <script src="../../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
